{"version":3,"sources":["@core/components/input-password-toggle/index.js","@core/auth/jwt/jwtDefaultConfig.js","@core/auth/jwt/jwtService.js","auth/jwt/useJwt.js","@core/auth/jwt/useJwt.js","views/pages/admin/authentication/Register.js"],"names":["InputPasswordToggle","props","label","hideIcon","showIcon","visible","className","htmlFor","placeholder","iconSize","inputClassName","rest","useState","inputVisibility","setInputVisibility","for","classnames","type","id","addonType","onClick","size","renderIcon","defaultProps","loginEndpoint","registerEndpoint","refreshEndpoint","logoutEndpoint","tokenType","storageTokenKeyName","storageRefreshTokenKeyName","JwtService","jwtOverrideConfig","jwtConfig","jwtDefaultConfig","isAlreadyFetchingAccessToken","subscribers","this","axios","interceptors","request","use","config","accessToken","getToken","headers","Authorization","error","Promise","reject","response","originalRequest","status","refreshToken","then","r","setToken","data","setRefreshToken","onAccessTokenFetched","resolve","addSubscriber","filter","callback","push","localStorage","getItem","value","setItem","args","post","getRefreshToken","jwt","Register","ability","useContext","AbilityContext","useSkin","skin","history","useHistory","useDispatch","useForm","register","errors","handleSubmit","trigger","email","setEmail","valErrors","setValErrors","username","setUsername","password","setPassword","setTerms","illustration","source","require","default","Terms","href","e","preventDefault","Row","to","src","logoOncourse","alt","Col","lg","sm","md","CardTitle","tag","CardText","Form","action","onSubmit","isObjEmpty","useJwt","res","arr","property","console","user","update","catch","err","log","FormGroup","Label","Input","autoFocus","name","onChange","errs","target","innerRef","required","validate","Object","keys","length","CustomInput","checked","invalid","terms","Button","Ripple","block","color"],"mappings":"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","file":"static/js/54.f2ac0029.chunk.js","sourcesContent":["// ** React Imports\r\nimport { Fragment, useState } from 'react';\r\n\r\n// ** Third Party Components\r\nimport PropTypes from 'prop-types';\r\nimport classnames from 'classnames';\r\nimport { Eye, EyeOff } from 'react-feather';\r\nimport {\r\n\tInputGroup,\r\n\tInputGroupAddon,\r\n\tInput,\r\n\tInputGroupText,\r\n\tLabel,\r\n\tinputClassName,\r\n} from 'reactstrap';\r\n\r\nconst InputPasswordToggle = (props) => {\r\n\t// ** Props\r\n\tconst {\r\n\t\tlabel,\r\n\t\thideIcon,\r\n\t\tshowIcon,\r\n\t\tvisible,\r\n\t\tclassName,\r\n\t\thtmlFor,\r\n\t\tplaceholder,\r\n\t\ticonSize,\r\n\t\tinputClassName,\r\n\t\t...rest\r\n\t} = props;\r\n\r\n\t// ** State\r\n\tconst [inputVisibility, setInputVisibility] = useState(visible);\r\n\r\n\t// ** Renders Icon Based On Visibility\r\n\tconst renderIcon = () => {\r\n\t\tconst size = iconSize ? iconSize : 14;\r\n\r\n\t\tif (inputVisibility === false) {\r\n\t\t\treturn hideIcon ? hideIcon : <Eye size={size} />;\r\n\t\t} else {\r\n\t\t\treturn showIcon ? showIcon : <EyeOff size={size} />;\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{label ? <Label for={htmlFor}>{label}</Label> : null}\r\n\t\t\t<InputGroup\r\n\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t[className]: className,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t<Input\r\n\t\t\t\t\ttype={inputVisibility === false ? 'password' : 'text'}\r\n\t\t\t\t\tplaceholder={placeholder ? placeholder : '路路路路路路路路路路路路'}\r\n\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t[inputClassName]: inputClassName,\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t/*eslint-disable */\r\n\t\t\t\t\t{...(label && htmlFor\r\n\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\tid: htmlFor,\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t: {})}\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t\t/*eslint-enable */\r\n\t\t\t\t/>\r\n\t\t\t\t<InputGroupAddon addonType=\"append\" onClick={() => setInputVisibility(!inputVisibility)}>\r\n\t\t\t\t\t<InputGroupText className=\"cursor-pointer\">{renderIcon()}</InputGroupText>\r\n\t\t\t\t</InputGroupAddon>\r\n\t\t\t</InputGroup>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default InputPasswordToggle;\r\n\r\n// ** PropTypes\r\nInputPasswordToggle.propTypes = {\r\n\thideIcon: PropTypes.node,\r\n\tshowIcon: PropTypes.node,\r\n\tvisible: PropTypes.bool,\r\n\tclassName: PropTypes.string,\r\n\tplaceholder: PropTypes.string,\r\n\ticonSize: PropTypes.number,\r\n\tinputClassName: PropTypes.string,\r\n\tlabel(props, propName, componentName) {\r\n\t\t// ** If label is defined and htmlFor is undefined throw error\r\n\t\tif (props[propName] && props['htmlFor'] === 'undefined') {\r\n\t\t\tthrow new Error('htmlFor prop is required when label prop is present');\r\n\t\t}\r\n\t},\r\n\thtmlFor(props, propName, componentName) {\r\n\t\t// ** If htmlFor is defined and label is undefined throw error\r\n\t\tif (props[propName] && props['label'] === 'undefined') {\r\n\t\t\tthrow new Error('label prop is required when htmlFor prop is present');\r\n\t\t}\r\n\t},\r\n};\r\n\r\n// ** Default Props\r\nInputPasswordToggle.defaultProps = {\r\n\tvisible: false,\r\n};\r\n","// ** Auth Endpoints\r\nexport default {\r\n\tloginEndpoint: '/jwt/login',\r\n\tregisterEndpoint: '/jwt/register',\r\n\trefreshEndpoint: '/jwt/refresh-token',\r\n\tlogoutEndpoint: '/jwt/logout',\r\n\r\n\t// ** This will be prefixed in authorization header with token\r\n\t// ? e.g. Authorization: Bearer <token>\r\n\ttokenType: 'Bearer',\r\n\r\n\t// ** Value of this property will be used as key to store JWT token in storage\r\n\tstorageTokenKeyName: 'accessToken',\r\n\tstorageRefreshTokenKeyName: 'refreshToken',\r\n};\r\n","import axios from 'axios';\r\nimport jwtDefaultConfig from './jwtDefaultConfig';\r\n\r\nexport default class JwtService {\r\n\t// ** jwtConfig <= Will be used by this service\r\n\tjwtConfig = { ...jwtDefaultConfig };\r\n\r\n\t// ** For Refreshing Token\r\n\tisAlreadyFetchingAccessToken = false;\r\n\r\n\t// ** For Refreshing Token\r\n\tsubscribers = [];\r\n\r\n\tconstructor(jwtOverrideConfig) {\r\n\t\tthis.jwtConfig = { ...this.jwtConfig, ...jwtOverrideConfig };\r\n\r\n\t\t// ** Request Interceptor\r\n\t\taxios.interceptors.request.use(\r\n\t\t\t(config) => {\r\n\t\t\t\t// ** Get token from localStorage\r\n\t\t\t\tconst accessToken = this.getToken();\r\n\r\n\t\t\t\t// ** If token is present add it to request's Authorization Header\r\n\t\t\t\tif (accessToken) {\r\n\t\t\t\t\t// ** eslint-disable-next-line no-param-reassign\r\n\t\t\t\t\tconfig.headers.Authorization = `${this.jwtConfig.tokenType} ${accessToken}`;\r\n\t\t\t\t}\r\n\t\t\t\treturn config;\r\n\t\t\t},\r\n\t\t\t(error) => Promise.reject(error)\r\n\t\t);\r\n\r\n\t\t// ** Add request/response interceptor\r\n\t\taxios.interceptors.response.use(\r\n\t\t\t(response) => response,\r\n\t\t\t(error) => {\r\n\t\t\t\t// ** const { config, response: { status } } = error\r\n\t\t\t\tconst { config, response } = error;\r\n\t\t\t\tconst originalRequest = config;\r\n\r\n\t\t\t\t// ** if (status === 401) {\r\n\t\t\t\tif (response && response.status === 401) {\r\n\t\t\t\t\tif (!this.isAlreadyFetchingAccessToken) {\r\n\t\t\t\t\t\tthis.isAlreadyFetchingAccessToken = true;\r\n\t\t\t\t\t\tthis.refreshToken().then((r) => {\r\n\t\t\t\t\t\t\tthis.isAlreadyFetchingAccessToken = false;\r\n\r\n\t\t\t\t\t\t\t// ** Update accessToken in localStorage\r\n\t\t\t\t\t\t\tthis.setToken(r.data.accessToken);\r\n\t\t\t\t\t\t\tthis.setRefreshToken(r.data.refreshToken);\r\n\r\n\t\t\t\t\t\t\tthis.onAccessTokenFetched(r.data.accessToken);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst retryOriginalRequest = new Promise((resolve) => {\r\n\t\t\t\t\t\tthis.addSubscriber((accessToken) => {\r\n\t\t\t\t\t\t\t// ** Make sure to assign accessToken according to your response.\r\n\t\t\t\t\t\t\t// ** Check: https://pixinvent.ticksy.com/ticket/2413870\r\n\t\t\t\t\t\t\t// ** Change Authorization header\r\n\t\t\t\t\t\t\toriginalRequest.headers.Authorization = `${this.jwtConfig.tokenType} ${accessToken}`;\r\n\t\t\t\t\t\t\tresolve(this.axios(originalRequest));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn retryOriginalRequest;\r\n\t\t\t\t}\r\n\t\t\t\treturn Promise.reject(error);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tonAccessTokenFetched(accessToken) {\r\n\t\tthis.subscribers = this.subscribers.filter((callback) => callback(accessToken));\r\n\t}\r\n\r\n\taddSubscriber(callback) {\r\n\t\tthis.subscribers.push(callback);\r\n\t}\r\n\r\n\tgetToken() {\r\n\t\treturn localStorage.getItem(this.jwtConfig.storageTokenKeyName);\r\n\t}\r\n\r\n\tgetRefreshToken() {\r\n\t\treturn localStorage.getItem(this.jwtConfig.storageRefreshTokenKeyName);\r\n\t}\r\n\r\n\tsetToken(value) {\r\n\t\tlocalStorage.setItem(this.jwtConfig.storageTokenKeyName, value);\r\n\t}\r\n\r\n\tsetRefreshToken(value) {\r\n\t\tlocalStorage.setItem(this.jwtConfig.storageRefreshTokenKeyName, value);\r\n\t}\r\n\r\n\tlogin(...args) {\r\n\t\treturn axios.post(this.jwtConfig.loginEndpoint, ...args);\r\n\t}\r\n\r\n\tregister(...args) {\r\n\t\treturn axios.post(this.jwtConfig.registerEndpoint, ...args);\r\n\t}\r\n\r\n\trefreshToken() {\r\n\t\treturn axios.post(this.jwtConfig.refreshEndpoint, {\r\n\t\t\trefreshToken: this.getRefreshToken(),\r\n\t\t});\r\n\t}\r\n}\r\n","// ** Core JWT Import\r\nimport useJwt from '@src/@core/auth/jwt/useJwt';\r\n\r\nconst { jwt } = useJwt({});\r\n\r\nexport default jwt;\r\n","// ** JWT Service Import\r\nimport JwtService from './jwtService';\r\n\r\n// ** Export Service as useJwt\r\nexport default function useJwt(jwtOverrideConfig) {\r\n\tconst jwt = new JwtService(jwtOverrideConfig);\r\n\r\n\treturn {\r\n\t\tjwt,\r\n\t};\r\n}\r\n","import { Fragment, useState, useContext } from 'react';\r\nimport { isObjEmpty } from '@utils';\r\nimport classnames from 'classnames';\r\nimport { useSkin } from '@hooks/useSkin';\r\nimport useJwt from '@src/auth/jwt/useJwt';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useForm } from 'react-hook-form';\r\n// import { handleLogin } from '@store/actions/auth';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { AbilityContext } from '@src/utility/context/Can';\r\nimport InputPasswordToggle from '@components/input-password-toggle';\r\nimport { Facebook, Twitter, Mail, GitHub } from 'react-feather';\r\nimport {\r\n\tRow,\r\n\tCol,\r\n\tCardTitle,\r\n\tCardText,\r\n\tFormGroup,\r\n\tLabel,\r\n\tButton,\r\n\tForm,\r\n\tInput,\r\n\tCustomInput,\r\n} from 'reactstrap';\r\nimport logoOncourse from '@src/assets/images/logo/logo-oncourse_.png';\r\nimport '@styles/base/pages/page-auth.scss';\r\nimport { handleLogin } from '../../../../redux/authSlice';\r\n\r\nconst Register = () => {\r\n\tconst ability = useContext(AbilityContext);\r\n\r\n\tconst [skin, setSkin] = useSkin();\r\n\r\n\tconst history = useHistory();\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst { register, errors, handleSubmit, trigger } = useForm();\r\n\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [valErrors, setValErrors] = useState({});\r\n\tconst [username, setUsername] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst [terms, setTerms] = useState(false);\r\n\r\n\tconst illustration = skin === 'dark' ? 'register-v2-dark.svg' : 'register-v2.svg',\r\n\t\tsource = require(`@src/assets/images/pages/${illustration}`).default;\r\n\r\n\tconst Terms = () => {\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\tI agree to\r\n\t\t\t\t<a className=\"ml-25\" href=\"/\" onClick={(e) => e.preventDefault()}>\r\n\t\t\t\t\tprivacy policy & terms\r\n\t\t\t\t</a>\r\n\t\t\t</Fragment>\r\n\t\t);\r\n\t};\r\n\r\n\tconst onSubmit = () => {\r\n\t\tif (isObjEmpty(errors)) {\r\n\t\t\tuseJwt\r\n\t\t\t\t.register({ username, email, password })\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res.data.error) {\r\n\t\t\t\t\t\tconst arr = {};\r\n\t\t\t\t\t\tfor (const property in res.data.error) {\r\n\t\t\t\t\t\t\tif (res.data.error[property] !== null) arr[property] = res.data.error[property];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsetValErrors(arr);\r\n\t\t\t\t\t\tif (res.data.error.email !== null) console.error(res.data.error.email);\r\n\t\t\t\t\t\tif (res.data.error.username !== null) console.error(res.data.error.username);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetValErrors({});\r\n\t\t\t\t\t\tconst data = {\r\n\t\t\t\t\t\t\t...res.data.user,\r\n\t\t\t\t\t\t\taccessToken: res.data.accessToken,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tability.update(res.data.user.ability);\r\n\t\t\t\t\t\t// dispatch(handleLogin(data));\r\n\t\t\t\t\t\thistory.push('/');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => console.log(err));\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleUsernameChange = (e) => {\r\n\t\tconst errs = valErrors;\r\n\t\tif (errs.username) delete errs.username;\r\n\t\tsetUsername(e.target.value);\r\n\t\tsetValErrors(errs);\r\n\t};\r\n\r\n\tconst handleEmailChange = (e) => {\r\n\t\tconst errs = valErrors;\r\n\t\tif (errs.email) delete errs.email;\r\n\t\tsetEmail(e.target.value);\r\n\t\tsetValErrors(errs);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"auth-wrapper auth-v2\">\r\n\t\t\t<Row className=\"auth-inner m-0\">\r\n\t\t\t\t<Link className=\"brand-logo\" to=\"/\" onClick={(e) => e.preventDefault()}>\r\n\t\t\t\t\t<img src={logoOncourse} alt=\"logo\" />\r\n\t\t\t\t\t{/* <svg viewBox=\"0 0 139 95\" version=\"1.1\" height=\"28\">\r\n\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t<linearGradient\r\n\t\t\t\t\t\t\t\tx1=\"100%\"\r\n\t\t\t\t\t\t\t\ty1=\"10.5120544%\"\r\n\t\t\t\t\t\t\t\tx2=\"50%\"\r\n\t\t\t\t\t\t\t\ty2=\"89.4879456%\"\r\n\t\t\t\t\t\t\t\tid=\"linearGradient-1\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<stop stopColor=\"#000000\" offset=\"0%\"></stop>\r\n\t\t\t\t\t\t\t\t<stop stopColor=\"#FFFFFF\" offset=\"100%\"></stop>\r\n\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t<linearGradient\r\n\t\t\t\t\t\t\t\tx1=\"64.0437835%\"\r\n\t\t\t\t\t\t\t\ty1=\"46.3276743%\"\r\n\t\t\t\t\t\t\t\tx2=\"37.373316%\"\r\n\t\t\t\t\t\t\t\ty2=\"100%\"\r\n\t\t\t\t\t\t\t\tid=\"linearGradient-2\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<stop stopColor=\"#EEEEEE\" stopOpacity=\"0\" offset=\"0%\"></stop>\r\n\t\t\t\t\t\t\t\t<stop stopColor=\"#FFFFFF\" offset=\"100%\"></stop>\r\n\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t<g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\r\n\t\t\t\t\t\t\t<g id=\"Artboard\" transform=\"translate(-400.000000, -178.000000)\">\r\n\t\t\t\t\t\t\t\t<g id=\"Group\" transform=\"translate(400.000000, 178.000000)\">\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\td=\"M-5.68434189e-14,2.84217094e-14 L39.1816085,2.84217094e-14 L69.3453773,32.2519224 L101.428699,2.84217094e-14 L138.784583,2.84217094e-14 L138.784199,29.8015838 C137.958931,37.3510206 135.784352,42.5567762 132.260463,45.4188507 C128.736573,48.2809251 112.33867,64.5239941 83.0667527,94.1480575 L56.2750821,94.1480575 L6.71554594,44.4188507 C2.46876683,39.9813776 0.345377275,35.1089553 0.345377275,29.8015838 C0.345377275,24.4942122 0.230251516,14.560351 -5.68434189e-14,2.84217094e-14 Z\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"Path\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ fill: 'currentColor' }}\r\n\t\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\td=\"M69.3453773,32.2519224 L101.428699,1.42108547e-14 L138.784583,1.42108547e-14 L138.784199,29.8015838 C137.958931,37.3510206 135.784352,42.5567762 132.260463,45.4188507 C128.736573,48.2809251 112.33867,64.5239941 83.0667527,94.1480575 L56.2750821,94.1480575 L32.8435758,70.5039241 L69.3453773,32.2519224 Z\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"Path\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"url(#linearGradient-1)\"\r\n\t\t\t\t\t\t\t\t\t\topacity=\"0.2\"\r\n\t\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t\t\t<polygon\r\n\t\t\t\t\t\t\t\t\t\tid=\"Path-2\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"#000000\"\r\n\t\t\t\t\t\t\t\t\t\topacity=\"0.049999997\"\r\n\t\t\t\t\t\t\t\t\t\tpoints=\"69.3922914 32.4202615 32.8435758 70.5039241 54.0490008 16.1851325\"\r\n\t\t\t\t\t\t\t\t\t></polygon>\r\n\t\t\t\t\t\t\t\t\t<polygon\r\n\t\t\t\t\t\t\t\t\t\tid=\"Path-2\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"#000000\"\r\n\t\t\t\t\t\t\t\t\t\topacity=\"0.099999994\"\r\n\t\t\t\t\t\t\t\t\t\tpoints=\"69.3922914 32.4202615 32.8435758 70.5039241 58.3683556 20.7402338\"\r\n\t\t\t\t\t\t\t\t\t></polygon>\r\n\t\t\t\t\t\t\t\t\t<polygon\r\n\t\t\t\t\t\t\t\t\t\tid=\"Path-3\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"url(#linearGradient-2)\"\r\n\t\t\t\t\t\t\t\t\t\topacity=\"0.099999994\"\r\n\t\t\t\t\t\t\t\t\t\tpoints=\"101.428699 0 83.0667527 94.1480575 130.378721 47.0740288\"\r\n\t\t\t\t\t\t\t\t\t></polygon>\r\n\t\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t</g>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t<h2 className=\"brand-text text-primary ml-1\">Vuexy</h2> */}\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Col className=\"d-none d-lg-flex align-items-center p-5\" lg=\"8\" sm=\"12\">\r\n\t\t\t\t\t<div className=\"w-100 d-lg-flex align-items-center justify-content-center px-5\">\r\n\t\t\t\t\t\t<img className=\"img-fluid\" src={source} alt=\"Login V2\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col className=\"d-flex align-items-center auth-bg px-2 p-lg-5\" lg=\"4\" sm=\"12\">\r\n\t\t\t\t\t<Col className=\"px-xl-2 mx-auto\" sm=\"8\" md=\"6\" lg=\"12\">\r\n\t\t\t\t\t\t<CardTitle tag=\"h2\" className=\"font-weight-bold mb-1\">\r\n\t\t\t\t\t\t\tWelcome to Uprep! \r\n\t\t\t\t\t\t</CardTitle>\r\n\t\t\t\t\t\t<CardText className=\"mb-2\">Please register your account and start !!</CardText>\r\n\r\n\t\t\t\t\t\t<Form action=\"/\" className=\"auth-register-form mt-2\" onSubmit={handleSubmit(onSubmit)}>\r\n\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t<Label className=\"form-label\" for=\"register-username\">\r\n\t\t\t\t\t\t\t\t\tUsername\r\n\t\t\t\t\t\t\t\t</Label>\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tvalue={username}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"johndoe\"\r\n\t\t\t\t\t\t\t\t\tid=\"register-username\"\r\n\t\t\t\t\t\t\t\t\tname=\"register-username\"\r\n\t\t\t\t\t\t\t\t\tonChange={handleUsernameChange}\r\n\t\t\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\t\t'is-invalid': errors['register-username'],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\tinnerRef={register({\r\n\t\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\t\tvalidate: (value) => value !== '',\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{Object.keys(valErrors).length && valErrors.username ? (\r\n\t\t\t\t\t\t\t\t\t<small className=\"text-danger\">{valErrors.username}</small>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t<Label className=\"form-label\" for=\"register-email\">\r\n\t\t\t\t\t\t\t\t\tEmail\r\n\t\t\t\t\t\t\t\t</Label>\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\tid=\"register-email\"\r\n\t\t\t\t\t\t\t\t\tname=\"register-email\"\r\n\t\t\t\t\t\t\t\t\tonChange={handleEmailChange}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"john@example.com\"\r\n\t\t\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\t\t'is-invalid': errors['register-email'],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\tinnerRef={register({\r\n\t\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\t\tvalidate: (value) => value !== '',\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{Object.keys(valErrors).length && valErrors.email ? (\r\n\t\t\t\t\t\t\t\t\t<small className=\"text-danger\">{valErrors.email}</small>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t<Label className=\"form-label\" for=\"register-password\">\r\n\t\t\t\t\t\t\t\t\tPassword\r\n\t\t\t\t\t\t\t\t</Label>\r\n\t\t\t\t\t\t\t\t<InputPasswordToggle\r\n\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\tid=\"register-password\"\r\n\t\t\t\t\t\t\t\t\tname=\"register-password\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"input-group-merge\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\r\n\t\t\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\t\t'is-invalid': errors['register-password'],\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\tinnerRef={register({\r\n\t\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\t\tvalidate: (value) => value !== '',\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t<CustomInput\r\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\tid=\"terms\"\r\n\t\t\t\t\t\t\t\t\tname=\"terms\"\r\n\t\t\t\t\t\t\t\t\tvalue=\"terms\"\r\n\t\t\t\t\t\t\t\t\tlabel={<Terms />}\r\n\t\t\t\t\t\t\t\t\tclassName=\"custom-control-Primary\"\r\n\t\t\t\t\t\t\t\t\tinnerRef={register({ required: true })}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setTerms(e.target.checked)}\r\n\t\t\t\t\t\t\t\t\tinvalid={errors.terms && true}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t<Button.Ripple type=\"submit\" block color=\"primary\">\r\n\t\t\t\t\t\t\t\tSign up\r\n\t\t\t\t\t\t\t</Button.Ripple>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t<p className=\"text-center mt-2\">\r\n\t\t\t\t\t\t\t<span className=\"mr-25\">Already have an account?</span>\r\n\t\t\t\t\t\t\t<Link to=\"/login\">\r\n\t\t\t\t\t\t\t\t<span className=\"link-text\">Sign in instead</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<div className=\"divider my-2\">\r\n\t\t\t\t\t\t\t<div className=\"divider-text\">or</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"auth-footer-btn d-flex justify-content-center\">\r\n\t\t\t\t\t\t\t<Button.Ripple color=\"facebook\">\r\n\t\t\t\t\t\t\t\t<Facebook size={14} />\r\n\t\t\t\t\t\t\t</Button.Ripple>\r\n\t\t\t\t\t\t\t<Button.Ripple color=\"twitter\">\r\n\t\t\t\t\t\t\t\t<Twitter size={14} />\r\n\t\t\t\t\t\t\t</Button.Ripple>\r\n\t\t\t\t\t\t\t<Button.Ripple color=\"google\">\r\n\t\t\t\t\t\t\t\t<Mail size={14} />\r\n\t\t\t\t\t\t\t</Button.Ripple>\r\n\t\t\t\t\t\t\t<Button.Ripple className=\"mr-0\" color=\"github\">\r\n\t\t\t\t\t\t\t\t<GitHub size={14} />\r\n\t\t\t\t\t\t\t</Button.Ripple>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Register;\r\n"],"sourceRoot":""}